$legacy-support-for-ie:       false;
$experimental-support-for-opera: false;
$experimental-support-for-mozilla: false;
$experimental-support-for-microsoft: false;

@import "compass";

$touchable-size:              48px; // Default in iOS: "44px"; Android: "48px"
$tablet-breakpoint:           600px; // Nexus 7

$row-width:                   800px;
$total-columns:               4;
$block-grid-elements:         4;
$column-gutter:               $touchable-size / 1.5;
$base-padding:                $column-gutter / 2;
$half-padding:                $column-gutter / 4;
$quarter-padding:             $column-gutter / 8;

$app-border-radius:           0; // Default in iOS 6: "3px";
$app-background:              #fff;

$em-base:                     17px;
$small-font-size:             15px;
$smallest-font-size:          13px;
$big-font-size:               26px;
$biggest-font-size:           34px;
$body-font-family:            "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif;
$body-font-color:             #333;
$body-line-height:            1.4;
$body-font-weight-strong:     bold;

$action-bar-height:           $touchable-size;
$action-bar-background-color: #eaeaea;
$action-bar-border-size:      1px;
$action-bar-border-color:     darken($action-bar-background-color, 5%);
$action-bar-text-color:       #666;
$action-bar-text-size:        20px;
$action-bar-icon-size:        20px;

$drawer-width:                260px; // 320px - 60px
$drawer-background:           #22252c;
$drawer-border-right-color:   #121315;
$drawer-text-color:           #eff0f2;
$drawer-text-size:            18px;
$drawer-menu-border-color:    darken($drawer-background, 3%);
$drawer-menu-selected:        darken($drawer-background, 5%);

$tableview-detail-font-color: #337abd;
$tableview-border-color:      #eaeaea;

$hr-border-width:             1px;
$hr-border-style:             solid;
$hr-border-color:             #ddd;
$hr-margin:                   ($base-padding * 1.5);

//
// Other rules
//

@import "app-foundation";
@import "app-navigation";
@import "app-colors";
@import "app-icons";
@import "phonegap";

//
// Mixins
//

@mixin ellipsis() {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

//
// Typo
//

h1, h2, h3, h4 {
    margin: .25em 0 .75em;
    font-weight: 300;
    line-height: 1.2;
}

p, ul {
    margin: 0;
    padding: 0;
    line-height: $body-line-height;
}

li {
    list-style: none;
}

a {
    color: darken($color-blue, 10%);
    text-decoration: none;

    &:visited {
        color: $color-blue;
    }
}

//
// Layout
//

body {
    background: $drawer-background;
    line-height: $body-line-height;
}

main, section, section > div {
    background: $app-background;
}

section {
    div.overthrow {
        padding: $base-padding;

        @media only screen and (min-width: $tablet-breakpoint) {
            padding: ($base-padding * 2);
        }
    }
}

//
// Border radius
//

@if $app-border-radius != 0 {
    body,
    main,
    section > div {
        @include border-radius($app-border-radius);
        overflow: hidden;
    }
}

//
// Nice borders when menu is open
//

body.active-menu {
    main {
        border-left: 1px solid $drawer-border-right-color;
        
        section > div:first-child {
            border-left: 1px solid #68696b;

            div.overthrow {
                padding-right: ($base-padding - 2px);
            }
        }
    }
}

//
// Action bar
//

header {
    height: $action-bar-height;
    line-height: $action-bar-height;
    background-color: $action-bar-background-color;
    
    @if $action-bar-border-size != 0 {
        border-bottom: $action-bar-border-size solid $action-bar-border-color;
    }
    
    .title {
        font-size: $action-bar-text-size;
        font-weight: normal;
        line-height: inherit;
        margin: 0 3em 0 0;
        text-align: center;
        color: $action-bar-text-color;
        @include ellipsis();
    }
    
    i {
        background-color: $action-bar-background-color;
        margin: 0 $base-padding;
        font-size: $action-bar-icon-size;
        color: $action-bar-text-color;
    }
}

//
// Drawer
//

ul.drawer {
    background: $drawer-background;
    color: $drawer-text-color;
    font-size: $drawer-text-size;
    
    li {
        height: $touchable-size;
        padding: 0 $base-padding;
        
        a {
            display: block;
            height: $touchable-size;
            line-height: $touchable-size;
            border-bottom: 1px solid $drawer-menu-border-color;
            color: $drawer-text-color;
            @include ellipsis();
            
            [class^="icon-"] {
                margin-right: $base-padding;
                font-size: $drawer-text-size;
            }
            
            &.active {
                background: $drawer-menu-selected;
                margin: 0 (-($base-padding));
                padding: 0 $base-padding;
                margin-top: -1px;
                border-top: 1px solid $drawer-menu-border-color;
            }

            &.settings {
                text-transform: uppercase;
                font-size: $smallest-font-size;
                color: lighten($drawer-background, 15%);
            }
        }
    }
}

//
// TableView
//

.table-view {
    ul {
        border-width: 1px 0;
        border-style: solid;
        border-color: $tableview-border-color;
        margin-right: -($base-padding);

        a {
            display: block;
            color: $body-font-color;
            border-bottom: 1px solid $tableview-border-color;
            height: $touchable-size;
            line-height: $touchable-size;
            padding-right: $base-padding;
            @include ellipsis();

            i {
                float: right;
                color: lighten($body-font-color, 50%);

                &.selected {
                    color: $tableview-detail-font-color;
                }
            }

            .detail {
                float: right;
                color: $tableview-detail-font-color;
                margin-right: $half-padding;
            }
        }

        li:last-child a {
            border: 0;
        }
    }
}

.list-with-images {
    .title {
        margin: 0 $base-padding 0 0;
    }

    .icon-right-open {
        font-size: 1.2em;
        float: right;
        color: $color-lightest-text;
        margin: 0 (-$half-padding) 0 $half-padding;
    }

    .thumbnail {
        width: 80%;
        @include border-radius(1000px);

        &.color-0 {
            background-color: $color-lightest-blue;
        }
        &.color-1 {
            background-color: $color-lightest-violet;
        }
        &.color-2 {
            background-color: $color-lightest-green;
        }
        &.color-3 {
            background-color: $color-lightest-orange;
        }
        &.color-4 {
            background-color: $color-lightest-red;
        }
    }

    hr {
        margin: $base-padding (-$base-padding);
    }

    div:last-child hr {
        display: none;
    }
}

//
// General text
//

.content {
    h1, h2, h3, h4, h5 {
        font-size: 1em;
        font-weight: normal;
        font-style: italic;

        strong {
            font-weight: normal;
        }
    }

    p, img {
        display: block;
        margin: 1em 0;
    }

    ol, ul {
        padding-left: 1.5em;
    }

    ul {
        li {
            list-style: disc outside none;
        }
    }

    ol {
        li {
            list-style: decimal outside none;
        }
    }
}

.external-link {
    @include button(1em, $color-light-blue, 3px, true, false, false);
    display: block;
    margin: $column-gutter 0;

    &, &:visited {
        color: white;
    }
}

.post {
    .content {
        div > img + p {
            font-size: .9em;
            color: $color-light-text;
        }
    }
}

//
// Helpers
//

// From Foundation/type
hr {
    border: $hr-border-style $hr-border-color;
    border-width: $hr-border-width 0 0;
    clear: both;
    margin: $hr-margin 0;
    height: 0;
}

.strong {
    font-weight: $body-font-weight-strong;
}

.text-big {
    font-size: $big-font-size;
}

.text-biggest {
    font-size: $biggest-font-size;
}

.text-small {
    font-size: $small-font-size;
}

.text-smallest {
    font-size: $smallest-font-size;
}

.uppercase {
    text-transform: uppercase;
}

.lowercase {
    text-transform: lowercase;
}

a.chameleon {
    &, &:hover {
        color: inherit;
        text-decoration: none;
        cursor: default;
    }
}

@import "page-weather";
