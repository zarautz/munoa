<section class="on-{{ navCtrl.activeView }}" ng-controller="SettingsController as setCtrl">
    <div>
        <header>
            <a href ng-click="navCtrl.toggleMenu()"><i class="left icon-menu"></i></a>
            <h1 class="title">{{ 'settings'|translate }}</h1>
        </header>
        <div class="overthrow table-view">
            <h4>{{ 'settings.general'|translate }}</h4>
            <ul>
                <li ng-repeat="id in setCtrl.settings.getIds()">
                    <a href ng-click="navCtrl.pushView('settings.selector', { id: id, settings: setCtrl.settings })">
                        <i class="icon-right-open"></i>
                        {{ ('settings.' + id)|translate }}
                        <span class="detail">{{ ('settings.' + id + '.' + setCtrl.settings.get(id))|translate }}</span>
                    </a>
                </li>
            </ul>
            <br/>
            <h4>{{ 'settings.other'|translate }}</h4>
            <ul>
                <li>
                    <a href ng-click="navCtrl.pushView('settings.about')">
                        <i class="icon-right-open"></i>
                        {{ 'settings.about'|translate }}
                        <span class="detail"></span>
                    </a>
                </li>
                <li>
                    <a href ng-click="setCtrl.clearCache()">
                        {{ 'settings.cache'|translate }}
                        <span class="detail"></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div ng-include="view2"></div>
</section>

<script type="text/ng-template" id="settings.selector">
    <header>
        <a href ng-click="navCtrl.popView()"><i class="left icon-left"></i></a>
        <h1 class="title">{{ ('settings.' + pushData.id)|translate }}</h1>
    </header>
    <div class="overthrow table-view">
        <ul>
            <li ng-repeat="option in pushData.settings.getOptions(pushData.id)">
                <a href ng-click="setCtrl.updateSetting(pushData.id, option)">
                    <i class="icon-ok selected" ng-show="option == pushData.settings.get(pushData.id)"></i>
                    {{ ('settings.' + pushData.id + '.' + option)|translate }}
                </a>
            </li>
        </ul>
    </div>
</script>

<script type="text/ng-template" id="settings.about">
    <header>
        <a href ng-click="navCtrl.popView()"><i class="left icon-left"></i></a>
        <h1 class="title">{{ 'settings.about'|translate }}</h1>
    </header>
    <div class="overthrow">
        <p>Lorem.</p>
        <p><small>{{ 'settings.about.build'|translate }}: @@timestamp</small></p>
    </div>
</script>
