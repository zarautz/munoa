<section class="on-{{ navCtrl.activeView }}" ng-controller="ZuzarautzController as zuzarautzCtrl">
    <div>
        <header>
            <a href ng-click="navCtrl.toggleMenu()"><i class="left icon-menu"></i></a>
            <i ng-if="status.isLoading" class="right icon-spin color-blue animate-spin"></i>
            <i ng-if="status.isDone && status.isError" class="right icon-spin" ng-click="refresh()"></i>
            <h1 class="title">{{ 'zuzarautz'|translate }}</h1>
        </header>
        <div class="overthrow list-with-images">
            <div ng-repeat="post in posts">
                <div class="row collapse"
                    ng-click="navCtrl.pushView('post.show', { 'post': post })">
                    <div class="large-2 small-1 columns">
                        <img class="thumbnail color-{{ $index % 5 }}" ng-src="{{ post.getThumbnailImage() }}" />
                    </div>
                    <div class="large-3 small-3 columns">
                        <i class="icon-right-open"></i>
                        <h4 class="title">{{ post.title }}</h4>
                        <small class="color-lightest-text">{{ post.publishedAt | date:'longDate' }}</small>
                    </div>
                </div>
                <hr />
            </div>
            </div>
        </div>
    </div>
    <div ng-include="view2"></div>
</section>

<script type="text/ng-template" id="post.show">
    <header>
        <a href ng-click="navCtrl.popView()"><i class="left icon-left"></i></a>
        <!--<i class="right icon-share"></i>-->
        <h1 class="title">{{ pushData.post.title }}</h1>
    </header>
    <div class="overthrow post" ng-if="navCtrl.contentIsAlive(2)">
        <h1 class="color-blue">
            {{ pushData.post.title }}
        </h1>
        <div class="content" ng-bind-html="pushData.post.getContent('medium')"></div>
        <a href ng-click="navCtrl.openExternalLink(pushData.post.permalink)" class="external-link">
            Zu Zarautz webgunean ikusi
        </a>
    </div>
</script>
